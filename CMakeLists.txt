cmake_minimum_required(VERSION 3.7)
project(config)

set(PROJECT_TARGET config)

#set (CMAKE_C_FLAGS "-DDEFAULT_NAME_SEC='MAIN' -g3 -Wall ${CMAKE_C_FLAGS}")
file(GLOB LIST_SOURCES "src/*.c")
file(GLOB LIST_HEADERS "include/*.h")


add_executable(${PROJECT_TARGET} ${LIST_SOURCES} ${LIST_HEADERS})

target_include_directories(${PROJECT_TARGET} PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include)

if(DEFAULT_NAME_SEC)
	target_compile_options(${PROJECT_TARGET} PUBLIC -DDEFAULT_NAME_SEC=\"${DEFAULT_NAME_SEC}\")
endif()

if(VALUE_SEPARATOR_CHAR)
	target_compile_options(${PROJECT_TARGET} PUBLIC -DVALUE_SEPARATOR_CHAR=\"${VALUE_SEPARATOR_CHAR}\")
endif()

target_compile_options(${PROJECT_TARGET} PUBLIC -Wall)

set_target_properties(${PROJECT_TARGET}
    PROPERTIES
    ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/bin/"
    LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/bin/"
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/bin/"
)

